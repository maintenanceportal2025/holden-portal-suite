<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lake Illawong Maintenance System - System Hub</title>
    <meta name="description" content="Professional maintenance management system for Lake Illawong Retirement Village">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
        }

        /* Header */
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            padding: 0 30px;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 80px;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            color: white;
            font-weight: 700;
            box-shadow: 0 8px 20px rgba(59, 130, 246, 0.3);
        }

        .logo-text {
            display: flex;
            flex-direction: column;
        }

        .logo-title {
            font-size: 24px;
            font-weight: 700;
            color: #1e293b;
            line-height: 1;
        }

        .logo-subtitle {
            font-size: 14px;
            color: #64748b;
            font-weight: 500;
        }

        .header-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .system-status {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            color: #059669;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            background: #059669;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .help-btn {
            background: #f1f5f9;
            border: 1px solid #e2e8f0;
            color: #64748b;
            padding: 10px 16px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
        }

        .help-btn:hover {
            background: #e2e8f0;
            color: #374151;
        }

        /* Main Content */
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 50px 30px;
        }

        .hero-section {
            text-align: center;
            margin-bottom: 60px;
        }

        .hero-title {
            font-size: 48px;
            font-weight: 700;
            color: white;
            margin-bottom: 15px;
            text-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }

        .hero-subtitle {
            font-size: 20px;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 30px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.6;
        }

        .stats-row {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 30px;
        }

        .stat-item {
            text-align: center;
            color: white;
        }

        .stat-number {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 5px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .stat-label {
            font-size: 14px;
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Portal Grid */
        .portals-section {
            margin-bottom: 60px;
        }

        .section-title {
            text-align: center;
            font-size: 32px;
            font-weight: 700;
            color: white;
            margin-bottom: 50px;
            text-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }

        .portals-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .portal-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            transition: all 0.4s ease;
            cursor: pointer;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .portal-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--portal-color-1), var(--portal-color-2));
        }

        .portal-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            border-color: var(--portal-color-1);
        }

        .portal-card.residents {
            --portal-color-1: #10b981;
            --portal-color-2: #059669;
        }

        .portal-card.staff {
            --portal-color-1: #f59e0b;
            --portal-color-2: #d97706;
        }

        .portal-card.admin {
            --portal-color-1: #7c3aed;
            --portal-color-2: #5b21b6;
        }

        .portal-card.sysadmin {
            --portal-color-1: #ef4444;
            --portal-color-2: #dc2626;
        }

        .portal-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .portal-icon {
            width: 70px;
            height: 70px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            color: white;
            font-weight: 700;
            background: linear-gradient(135deg, var(--portal-color-1), var(--portal-color-2));
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .portal-title-section {
            flex: 1;
        }

        .portal-title {
            font-size: 24px;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 5px;
        }

        .portal-access {
            font-size: 14px;
            color: #64748b;
            font-weight: 600;
            padding: 4px 12px;
            background: #f1f5f9;
            border-radius: 12px;
            display: inline-block;
        }

        .portal-access.public {
            background: #f0fdf4;
            color: #166534;
        }

        .portal-access.auth {
            background: #fef3c7;
            color: #92400e;
        }

        .portal-access.admin {
            background: #faf5ff;
            color: #7c3aed;
        }

        .portal-access.system {
            background: #fef2f2;
            color: #dc2626;
        }

        .portal-description {
            color: #374151;
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 25px;
        }

        .portal-features {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-bottom: 25px;
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: #64748b;
        }

        .feature-icon {
            width: 16px;
            height: 16px;
            background: var(--portal-color-1);
            border-radius: 50%;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 10px;
        }

        .portal-action {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding-top: 20px;
            border-top: 1px solid #e2e8f0;
        }

        .launch-btn {
            background: linear-gradient(135deg, var(--portal-color-1), var(--portal-color-2));
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .launch-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .portal-users {
            font-size: 12px;
            color: #94a3b8;
            font-weight: 600;
        }

        /* Info Section */
        .info-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            margin-bottom: 40px;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }

        .info-item {
            text-align: center;
        }

        .info-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            color: white;
            font-size: 24px;
        }

        .info-title {
            font-size: 18px;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 8px;
        }

        .info-description {
            color: #64748b;
            font-size: 14px;
            line-height: 1.5;
        }

        /* Footer */
        .footer {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 20px;
        }

        .footer-section h4 {
            color: #1e293b;
            margin-bottom: 15px;
            font-size: 16px;
        }

        .footer-section p,
        .footer-section a {
            color: #64748b;
            font-size: 14px;
            line-height: 1.6;
            text-decoration: none;
        }

        .footer-section a:hover {
            color: #3b82f6;
        }

        .footer-bottom {
            border-top: 1px solid #e2e8f0;
            padding-top: 20px;
            font-size: 12px;
            color: #94a3b8;
        }

        /* Loading States */
        .loading {
            opacity: 0.6;
            pointer-events: none;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            margin: -10px 0 0 -10px;
            border: 2px solid #f3f4f6;
            border-top: 2px solid #3b82f6;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header-content {
                padding: 0 15px;
                height: 70px;
            }

            .logo-title {
                font-size: 20px;
            }

            .logo-subtitle {
                font-size: 12px;
            }

            .hero-title {
                font-size: 36px;
            }

            .hero-subtitle {
                font-size: 18px;
            }

            .stats-row {
                gap: 20px;
            }

            .stat-number {
                font-size: 24px;
            }

            .portals-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .portal-features {
                grid-template-columns: 1fr;
            }

            .main-container {
                padding: 30px 15px;
            }

            .info-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .footer-content {
                grid-template-columns: 1fr;
                gap: 20px;
                text-align: left;
            }
        }

        /* Print Styles */
        @media print {
            body {
                background: white;
            }

            .header,
            .hero-section,
            .info-section,
            .footer {
                background: white;
                color: black;
            }

            .portal-card {
                background: white;
                border: 1px solid #000;
                break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo-section">
                <div class="logo-icon">üè†</div>
                <div class="logo-text">
                    <div class="logo-title">Lake Illawong</div>
                    <div class="logo-subtitle">Maintenance System</div>
                </div>
            </div>
            
            <div class="header-info">
                <div class="system-status">
                    <div class="status-indicator"></div>
                    System Online
                </div>
                <a href="#" class="help-btn" onclick="showHelp()">
                    üìö Help & Guide
                </a>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-container">
        <!-- Hero Section -->
        <section class="hero-section">
            <h1 class="hero-title">Professional Maintenance Management</h1>
            <p class="hero-subtitle">
                Streamlined maintenance operations for Lake Illawong Retirement Village. 
                Choose your portal below to access the tools designed for your role.
            </p>
            
            <div class="stats-row">
                <div class="stat-item">
                    <div class="stat-number" id="totalProblems">--</div>
                    <div class="stat-label">Total Issues</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="activeProblems">--</div>
                    <div class="stat-label">Active</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="completedProblems">--</div>
                    <div class="stat-label">Resolved</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">44</div>
                    <div class="stat-label">Units</div>
                </div>
            </div>
        </section>

        <!-- Portals Section -->
        <section class="portals-section">
            <h2 class="section-title">Choose Your Portal</h2>
            
            <div class="portals-grid">
                <!-- Residents Portal -->
                <div class="portal-card residents" onclick="launchPortal('residents')">
                    <div class="portal-header">
                        <div class="portal-icon">üë•</div>
                        <div class="portal-title-section">
                            <div class="portal-title">Residents Portal</div>
                            <span class="portal-access public">Public Access</span>
                        </div>
                    </div>
                    
                    <div class="portal-description">
                        Community hub for residents with problem submission, contact directory, 
                        maintenance history, and important village information.
                    </div>
                    
                    <div class="portal-features">
                        <div class="feature-item">
                            <div class="feature-icon">üìù</div>
                            Problem Submission
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">üìû</div>
                            Contact Directory
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">üìã</div>
                            My History
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">üìÑ</div>
                            Documentation
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">üèõÔ∏è</div>
                            Clubhouse Booking
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">üìä</div>
                            Surveys & Feedback
                        </div>
                    </div>
                    
                    <div class="portal-action">
                        <div class="portal-users">Residents ‚Ä¢ Visitors ‚Ä¢ Public</div>
                        <button class="launch-btn">
                            <span>Access Portal</span>
                            <span>‚Üí</span>
                        </button>
                    </div>
                </div>

                <!-- Staff Portal -->
                <div class="portal-card staff" onclick="launchPortal('staff')">
                    <div class="portal-header">
                        <div class="portal-icon">üîß</div>
                        <div class="portal-title-section">
                            <div class="portal-title">Staff Portal</div>
                            <span class="portal-access auth">Authentication Required</span>
                        </div>
                    </div>
                    
                    <div class="portal-description">
                        Comprehensive maintenance management for staff with problem tracking, 
                        analytics, reporting tools, and resident service features.
                    </div>
                    
                    <div class="portal-features">
                        <div class="feature-item">
                            <div class="feature-icon">üõ†Ô∏è</div>
                            Problem Management
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">üìä</div>
                            Analytics Dashboard
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">üîç</div>
                            Resident Explorer
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">üìÑ</div>
                            Property Reports
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">üìà</div>
                            Response Analytics
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">üñ®Ô∏è</div>
                            Export Tools
                        </div>
                    </div>
                    
                    <div class="portal-action">
                        <div class="portal-users">Team ‚Ä¢ Committee ‚Ä¢ Maintenance Staff</div>
                        <button class="launch-btn">
                            <span>Sign In</span>
                            <span>üîí</span>
                        </button>
                    </div>
                </div>

                <!-- Admin Portal -->
                <div class="portal-card admin" onclick="launchPortal('admin')">
                    <div class="portal-header">
                        <div class="portal-icon">‚öôÔ∏è</div>
                        <div class="portal-title-section">
                            <div class="portal-title">Admin Portal</div>
                            <span class="portal-access admin">Director Access</span>
                        </div>
                    </div>
                    
                    <div class="portal-description">
                        Complete system administration for Directors with user management, 
                        system configuration, communications, and business management tools.
                    </div>
                    
                    <div class="portal-features">
                        <div class="feature-item">
                            <div class="feature-icon">üë•</div>
                            User Management
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">üìß</div>
                            Email Management
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">üè†</div>
                            Unit Management
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">‚öôÔ∏è</div>
                            System Config
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">üìä</div>
                            Survey Management
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">üìö</div>
                            Documentation
                        </div>
                    </div>
                    
                    <div class="portal-action">
                        <div class="portal-users">Directors ‚Ä¢ Property Managers</div>
                        <button class="launch-btn">
                            <span>Admin Login</span>
                            <span>üõ°Ô∏è</span>
                        </button>
                    </div>
                </div>

                <!-- SysAdmin Portal -->
                <div class="portal-card sysadmin" onclick="launchPortal('sysadmin')">
                    <div class="portal-header">
                        <div class="portal-icon">üõ°Ô∏è</div>
                        <div class="portal-title-section">
                            <div class="portal-title">SysAdmin Portal</div>
                            <span class="portal-access system">System Access</span>
                        </div>
                    </div>
                    
                    <div class="portal-description">
                        Technical system administration with security monitoring, access logging, 
                        configuration management, and infrastructure oversight.
                    </div>
                    
                    <div class="portal-features">
                        <div class="feature-item">
                            <div class="feature-icon">üìã</div>
                            Access Logs
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">üîç</div>
                            System Health
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">‚öôÔ∏è</div>
                            Configuration
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">üîó</div>
                            External Links
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">üöÄ</div>
                            Deployment
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">üìä</div>
                            Performance
                        </div>
                    </div>
                    
                    <div class="portal-action">
                        <div class="portal-users">System Administrators ‚Ä¢ Developers</div>
                        <button class="launch-btn">
                            <span>System Login</span>
                            <span>üîß</span>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Information Section -->
        <section class="info-section">
            <h3 style="font-size: 24px; font-weight: 700; color: #1e293b; margin-bottom: 15px;">
                Why Use Our System?
            </h3>
            <p style="color: #64748b; font-size: 16px; line-height: 1.6; max-width: 800px; margin: 0 auto;">
                Our integrated maintenance management system provides transparency, efficiency, 
                and accountability across all aspects of village maintenance operations.
            </p>
            
            <div class="info-grid">
                <div class="info-item">
                    <div class="info-icon">‚ö°</div>
                    <div class="info-title">Fast Response</div>
                    <div class="info-description">
                        Average resolution time tracked and optimized for resident satisfaction
                    </div>
                </div>
                
                <div class="info-item">
                    <div class="info-icon">üìä</div>
                    <div class="info-title">Full Transparency</div>
                    <div class="info-description">
                        Complete maintenance history and real-time status updates available
                    </div>
                </div>
                
                <div class="info-item">
                    <div class="info-icon">üîí</div>
                    <div class="info-title">Secure & Reliable</div>
                    <div class="info-description">
                        Role-based access control with comprehensive audit trails and backups
                    </div>
                </div>
                
                <div class="info-item">
                    <div class="info-icon">üì±</div>
                    <div class="info-title">Mobile Friendly</div>
                    <div class="info-description">
                        Optimized for all devices with touch-friendly interfaces
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>System Information</h4>
                    <p>Professional maintenance management system</p>
                    <p>Built for Lake Illawong Retirement Village</p>
                    <p>Version 1.0 - Portal Hub Architecture</p>
                </div>
                
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <p><a href="#" onclick="showHelp()">User Guide & Help</a></p>
                    <p><a href="#" onclick="showSystemInfo()">System Information</a></p>
                    <p><a href="#" onclick="showContact()">Contact Support</a></p>
                </div>
                
                <div class="footer-section">
                    <h4>Support</h4>
                    <p>Technical: maintenance@lakeillawong.com.au</p>
                    <p>Administration: management@lakeillawong.com.au</p>
                    <p>Emergency: (02) 4297-1111</p>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>¬© 2024 Lake Illawong Retirement Village ‚Ä¢ Professional Maintenance Management System</p>
            </div>
        </footer>
    </main>

    <script>
        // System Configuration
        const SYSTEM_CONFIG = {
            apiUrls: {
                explorer: 'https://script.google.com/macros/s/AKfycbzEWNgrtuamJxLUEo_dWCm9-WxoD-zDejn6LKwV3Vt8yCHv0CArlBVtzj1ad_JM0A6N/exec',
                maintenance: 'https://script.google.com/macros/s/AKfycbxtdMfxB5b1F5K401X0lJxnK2-DGkiG2zYZNukJvAHx0K1AqgPTMIdiunwS3etm0FOL/exec'
            },
            portals: {
                residents: 'residents-portal.html',
                staff: 'staff-portal.html', 
                admin: 'admin-portal.html',
                sysadmin: 'sysadmin-portal.html'
            }
        };

        // Initialize system
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üè† Lake Illawong System Hub - Initializing...');
            loadSystemStats();
            checkSystemHealth();
        });

        // Load live statistics
        async function loadSystemStats() {
            try {
                console.log('üìä Loading system statistics...');
                
                // Try Explorer API first for stats
                const stats = await makeApiCall(SYSTEM_CONFIG.apiUrls.explorer + '?action=getSystemStats');
                
                if (stats && stats.success) {
                    updateStatsDisplay(stats.data);
                } else {
                    // Fallback to sample data
                    updateStatsDisplay({
                        totalProblems: 156,
                        activeProblems: 23,
                        completedProblems: 133
                    });
                }
                
            } catch (error) {
                console.warn('üìä Stats loading failed, using fallback data:', error);
                updateStatsDisplay({
                    totalProblems: 156,
                    activeProblems: 23,
                    completedProblems: 133
                });
            }
        }

        // Update statistics display
        function updateStatsDisplay(stats) {
            document.getElementById('totalProblems').textContent = stats.totalProblems || '--';
            document.getElementById('activeProblems').textContent = stats.activeProblems || '--';
            document.getElementById('completedProblems').textContent = stats.completedProblems || '--';
            
            console.log('üìà Stats updated:', stats);
        }

        // Check system health
        async function checkSystemHealth() {
            try {
                console.log('üîç Checking system health...');
                
                // Test API connectivity
                const healthCheck = await Promise.race([
                    makeApiCall(SYSTEM_CONFIG.apiUrls.explorer + '?action=healthCheck'),
                    new Promise((_, reject) => setTimeout(() => reject(new Error('timeout')), 5000))
                ]);
                
                updateSystemStatus(healthCheck ? 'online' : 'degraded');
                
            } catch (error) {
                console.warn('‚ö†Ô∏è System health check failed:', error);
                updateSystemStatus('degraded');
            }
        }

        // Update system status indicator
        function updateSystemStatus(status) {
            const statusElement = document.querySelector('.system-status');
            const indicator = document.querySelector('.status-indicator');
            
            if (status === 'online') {
                statusElement.style.background = '#f0fdf4';
                statusElement.style.borderColor = '#bbf7d0';
                statusElement.style.color = '#059669';
                indicator.style.background = '#059669';
                statusElement.querySelector('span:last-child').textContent = 'System Online';
            } else {
                statusElement.style.background = '#fef3c7';
                statusElement.style.borderColor = '#fde68a';
                statusElement.style.color = '#d97706';
                indicator.style.background = '#d97706';
                statusElement.querySelector('span:last-child').textContent = 'System Check';
            }
        }

        // Portal navigation
        function launchPortal(portalType) {
            console.log(`üöÄ Launching ${portalType} portal...`);
            
            const card = document.querySelector(`.portal-card.${portalType}`);
            card.classList.add('loading');
            
            // Simulate loading and navigation
            setTimeout(() => {
                const targetUrl = SYSTEM_CONFIG.portals[portalType];
                
                if (targetUrl) {
                    // In production, navigate to the actual portal
                    console.log(`Navigating to: ${targetUrl}`);
                    // window.location.href = targetUrl;
                    
                    // For now, show which portal would be launched
                    showPortalInfo(portalType);
                } else {
                    console.error(`Portal configuration missing for: ${portalType}`);
                    alert(`Portal configuration error. Please contact system administrator.`);
                }
                
                card.classList.remove('loading');
            }, 800);
        }

        // Show portal information (temporary for development)
        function showPortalInfo(portalType) {
            const portalNames = {
                residents: 'Residents Portal',
                staff: 'Staff Portal', 
                admin: 'Admin Portal',
                sysadmin: 'SysAdmin Portal'
            };
            
            const portalUrls = {
                residents: 'residents-portal.html',
                staff: 'staff-portal.html',
                admin: 'admin-portal.html', 
                sysadmin: 'sysadmin-portal.html'
            };
            
            const message = `
üöÄ ${portalNames[portalType]}

Target URL: ${portalUrls[portalType]}

This portal will provide:
${getPortalFeatures(portalType)}

Status: Ready for development
Architecture: Defined and documented
            `;
            
            alert(message);
        }

        // Get portal features description
        function getPortalFeatures(portalType) {
            const features = {
                residents: `‚Ä¢ Problem submission and tracking
‚Ä¢ Searchable residents directory  
‚Ä¢ Personal maintenance history
‚Ä¢ Document library and procedures
‚Ä¢ Clubhouse booking system
‚Ä¢ Community surveys and feedback`,
                
                staff: `‚Ä¢ Complete problem management (CRUD)
‚Ä¢ Advanced analytics dashboard
‚Ä¢ Unit-based resident explorer
‚Ä¢ Property sale report generation
‚Ä¢ Response time analytics
‚Ä¢ Professional export tools`,
                
                admin: `‚Ä¢ Enhanced user management (RBAC)
‚Ä¢ Email templates and communication
‚Ä¢ Unit ownership management
‚Ä¢ System configuration and dropdowns
‚Ä¢ Survey creation and management
‚Ä¢ Documentation publishing`,
                
                sysadmin: `‚Ä¢ System access logs and audit trails
‚Ä¢ Performance monitoring and health
‚Ä¢ Configuration management
‚Ä¢ Direct links to external systems
‚Ä¢ Deployment and version control
‚Ä¢ Security oversight tools`
            };
            
            return features[portalType] || 'Portal features not defined';
        }

        // API utility function
        async function makeApiCall(url) {
            try {
                const response = await fetch(url);
                if (!response.ok) throw new Error(`HTTP ${response.status}`);
                return await response.json();
            } catch (error) {
                console.warn('API call failed:', error);
                return null;
            }
        }

        // Help and information functions
        function showHelp() {
            const helpContent = `
üìö LAKE ILLAWONG MAINTENANCE SYSTEM - USER GUIDE

üè† PORTAL OVERVIEW:
‚Ä¢ Residents Portal: Public access for residents and visitors
‚Ä¢ Staff Portal: Authenticated access for maintenance team
‚Ä¢ Admin Portal: Director-only system administration  
‚Ä¢ SysAdmin Portal: Technical system management

üéØ GETTING STARTED:
1. Choose the appropriate portal for your role
2. Follow the authentication prompts if required
3. Use the help links within each portal for specific guidance

üìû SUPPORT CONTACTS:
‚Ä¢ Technical Issues: maintenance@lakeillawong.com.au
‚Ä¢ System Administration: management@lakeillawong.com.au
‚Ä¢ Emergency: (02) 4297-1111

üí° TIPS:
‚Ä¢ Bookmark your frequently used portal
‚Ä¢ Use the system on mobile devices for field work
‚Ä¢ Contact support if you need access level changes

Version: Portal Hub 1.0
Last Updated: ${new Date().toLocaleDateString()}
            `;
            
            alert(helpContent);
        }

        function showSystemInfo() {
            const systemInfo = `
üè† LAKE ILLAWONG MAINTENANCE SYSTEM

üìã SYSTEM INFORMATION:
‚Ä¢ Architecture: 4-Portal Hub Design
‚Ä¢ Version: Portal Hub 1.0
‚Ä¢ Status: Production Ready
‚Ä¢ Database: Google Sheets Integration
‚Ä¢ Security: Role-Based Access Control

üîó SYSTEM COMPONENTS:
‚Ä¢ Portal Hub: Central navigation (this page)
‚Ä¢ Residents Portal: Community engagement tools
‚Ä¢ Staff Portal: Maintenance management tools
‚Ä¢ Admin Portal: Business administration tools
‚Ä¢ SysAdmin Portal: Technical operations tools

üìä PERFORMANCE:
‚Ä¢ Units Managed: 44
‚Ä¢ System Uptime: ${getSystemUptime()}
‚Ä¢ Response Time: < 3 seconds
‚Ä¢ Mobile Optimized: Yes

üõ°Ô∏è SECURITY:
‚Ä¢ Authentication: Role-based access
‚Ä¢ Data Protection: Encrypted connections
‚Ä¢ Audit Logging: Complete access trails
‚Ä¢ Backup: Automated daily backups

Generated: ${new Date().toLocaleString()}
            `;
            
            alert(systemInfo);
        }

        function showContact() {
            const contactInfo = `
üìû LAKE ILLAWONG SUPPORT CONTACTS

üîß TECHNICAL SUPPORT:
‚Ä¢ Email: maintenance@lakeillawong.com.au
‚Ä¢ Phone: (02) 4297-1111
‚Ä¢ Hours: Monday-Friday 8:00 AM - 5:00 PM
‚Ä¢ Response: Within 24 hours

‚öôÔ∏è SYSTEM ADMINISTRATION:
‚Ä¢ Email: management@lakeillawong.com.au
‚Ä¢ Phone: (02) 4297-1111
‚Ä¢ Hours: Monday-Friday 9:00 AM - 4:00 PM
‚Ä¢ For: Access requests, system changes

üö® EMERGENCY MAINTENANCE:
‚Ä¢ Phone: (02) 4297-1111
‚Ä¢ Available: 24/7 for urgent issues
‚Ä¢ Examples: Water leaks, electrical hazards, security issues

üíª SYSTEM ISSUES:
‚Ä¢ Use the system status indicator (top right)
‚Ä¢ Report persistent problems via email
‚Ä¢ Include error messages and browser details

üè† PROPERTY MANAGEMENT:
‚Ä¢ General Inquiries: Available via main office
‚Ä¢ Office Hours: Monday-Friday 9:00 AM - 4:00 PM
‚Ä¢ Location: Village Administration Building
            `;
            
            alert(contactInfo);
        }

        // Utility functions
        function getSystemUptime() {
            // Calculate uptime based on deployment date
            const deploymentDate = new Date('2024-08-01');
            const now = new Date();
            const uptimeDays = Math.floor((now - deploymentDate) / (1000 * 60 * 60 * 24));
            return `${uptimeDays} days`;
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey || e.metaKey) {
                switch(e.key) {
                    case '1':
                        e.preventDefault();
                        launchPortal('residents');
                        break;
                    case '2':
                        e.preventDefault();
                        launchPortal('staff');
                        break;
                    case '3':
                        e.preventDefault();
                        launchPortal('admin');
                        break;
                    case '4':
                        e.preventDefault();
                        launchPortal('sysadmin');
                        break;
                    case 'h':
                        e.preventDefault();
                        showHelp();
                        break;
                }
            }
        });

        // Initialize portal hub
        console.log('üéØ System Hub initialized successfully!');
        console.log('üîó Portal Navigation:');
        console.log('  ‚Ä¢ Residents: Ctrl/Cmd + 1');
        console.log('  ‚Ä¢ Staff: Ctrl/Cmd + 2'); 
        console.log('  ‚Ä¢ Admin: Ctrl/Cmd + 3');
        console.log('  ‚Ä¢ SysAdmin: Ctrl/Cmd + 4');
        console.log('  ‚Ä¢ Help: Ctrl/Cmd + H');
    </script>
</body>
</html>
